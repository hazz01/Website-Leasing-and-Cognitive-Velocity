<!DOCTYPE html>
<html lang="english">
  <head>
    <title>exported project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <link rel="stylesheet" href="src/input.css" />
    <link rel="stylesheet" href="output.css" />
    <style>
      * {
        font-family: Inter;
      }
    </style>
  </head>

  <body class="bg-color-main-bg">
    <!-- section -->
    <section class="max-w-6xl mx-auto mt-32 mb-32 p-10 bg-white rounded-lg">
      <form name="forms_pak_chusni">
        <div class="grid gap-6 mb-6 md:grid-cols-2">
          <div>
            <label for="nama" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nama</label>
            <input
              type="text"
              name="nama"
              id="nama"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:sbg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 shadow-sm shadow-slate-300/80 focus:shadow-sm focus:shadow-blue-300/100"
              placeholder="Masukkan Nama"
              required
            />
          </div>

          <div>
            <label for="email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Email</label>
            <input
              type="email"
              name="email"
              id="email"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-50 shadow-sm shadow-slate-300/80 focus:shadow-sm focus:shadow-blue-300/100"
              placeholder="Masukkan Email"
              required
            />
          </div>

          <div>
            <label for="umur" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Umur</label>
            <input
              type="number"
              name="umur"
              id="umur"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 shadow-sm shadow-slate-300/80 focus:shadow-sm focus:shadow-blue-300/100"
              placeholder="Masukkan Umur"
              required
            />
          </div>
          <div>
            <label for="gender" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Gender</label>
            <input
              type="text"
              name="gender"
              id="gender"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 shadow-sm shadow-slate-300/80 focus:shadow-sm focus:shadow-blue-300/100"
              placeholder="Laki-laki / Perempuan"
              required
            />
          </div>
        </div>
        <div class="mb-6">
          <label for="studi" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Program Studi</label>
          <input
            type="text"
            name="program_studi"
            id="studi"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 shadow-sm shadow-slate-300/80 focus:shadow-sm focus:shadow-blue-300/100"
            placeholder="Masukkan Program Studi"
            required
          />
        </div>

        <div class="mb-6">
          <label for="universitas" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Asal Universitas</label>
          <input
            type="text"
            name="asal_universitas"
            id="universitas"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 shadow-sm shadow-slate-300/80 focus:shadow-sm focus:shadow-blue-300/100"
            placeholder="Masukkan Asal Universitas"
            required
          />
        </div>

        <div>
          <label for="IPK" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Indeks Prestasi Kumulatif (IPK)</label>
          <input
            type="number"
            name="IPK"
            id="IPK"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 shadow-sm shadow-slate-300/80 focus:shadow-sm focus:shadow-blue-300/100"
            placeholder="Masukkan IPK"
            pattern="[0-9]{3}-[0-9]{2}-[0-9]{3}"
            required
          />
        </div>
        <div class="flex justify-end">
          <button
            type="button"
            onclick="saveAnswer();javascript:history.forward()"
            class="btn-kirim text-white bg-primary-color hover:bg-indigo-600 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-primary-color dark:hover:bg-indigo-600 dark:focus:ring-blue-800 mt-5"
          >
            Selanjutnya
          </button>
        </div>
      </form>
    </section>

    <!-- <script src="../path/to/flowbite/dist/flowbite.min.js"></script> -->
    <script>
      function getValueClose() {
        var deploymentId = "AKfycbwUVdBgiVO02UDiyfUH00aw-r5VNTSMrOApONVAAn_LbUXqQJdn9tT6WAagbXF-ehjg";
        var url = "https://script.google.com/macros/s/AKfycbwUVdBgiVO02UDiyfUH00aw-r5VNTSMrOApONVAAn_LbUXqQJdn9tT6WAagbXF-ehjg/exec";

        fetch(url, { mode: "no-cors" })
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
          })
          .then((data) => {
            console.log("Data received:", data);

            // Assuming STATUS is a property of the returned data
            if (data || data.STATUS == "false") {
              window.location.href = "./closed.html";
            } else {
              window.location.href = "./index.html";
            }
          })
          .catch((error) => console.error("Error:", error));
      }
      getValueClose();

      function loadAnswers() {
        const session = sessionStorage.getItem("FormData");
        if (session) {
          const sessionObject = JSON.parse(session);
          for (var question in sessionObject) {
            const inputs = document.getElementsByName(question);
            if (inputs) {
              inputs[0].value = sessionObject[question];
            }
          }
        }
      }
      loadAnswers();
      const scriptURL = "https://script.google.com/macros/s/AKfycbwUVdBgiVO02UDiyfUH00aw-r5VNTSMrOApONVAAn_LbUXqQJdn9tT6WAagbXF-ehjg/exec";
      const form = document.forms["forms_pak_chusni"];

      // form.addEventListener("submit", async (e) => {
      //   e?.preventDefault();
      //   let formData = new FormData(form);
      //   const value = Object.fromEntries(formData.entries());
      //   var json = JSON.stringify(value);
      //   sessionStorage.setItem("FormData", json);
      //   window.location.href = "frame-group-1/frame2.html";
      // });

      form.addEventListener("submit", saveAnswer);
      function saveAnswer(e) {
        e?.preventDefault();

        let tempStorage = JSON.parse(sessionStorage.getItem("FormData"));
        let formData = new FormData(form);
        let object = Object.fromEntries(formData.entries());
        tempStorage = { ...tempStorage, ...object };
        sessionStorage.setItem("FormData", JSON.stringify(tempStorage));

        window.location.href = "frame-group-1/frame2.html";
      }
    </script>
  </body>
</html>
